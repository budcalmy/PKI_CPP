# PKI Services

PKI Services — это проект для управления инфраструктурой открытых ключей (PKI). Реализует создание, управление и отзыв сертификатов, а также управление ключами и списками отзыва сертификатов (CRL).

## Описание проекта

Проект включает несколько компонентов, обеспечивающих работу PKI:

- **Управление сертификатами**: создание корневых и эмитентских сертификатов, управление сроками их действия, отзыв.
- **Управление ключами**: генерация, хранение и удаление закрытых ключей.
- **Списки отзыва (CRL)**: создание и управление списками отозванных сертификатов.
- **База данных**: хранение информации о сертификатах, запросах на сертификаты и списках отзыва.

Проект написан на C++ с использованием библиотеки OpenSSL для работы с криптографией и SQLite для хранения данных.

---

## Установка и настройка

### 1. Установите зависимости
Для работы проекта потребуется:

- **C++ компилятор** (например, GCC или Clang).
- **CMake** для сборки проекта.
- **OpenSSL** для работы с криптографией.
- **SQLite3** для управления базой данных.

На Ubuntu перечисленные зависимости можно установить следующими командами:

```bash
sudo apt update
sudo apt install build-essential cmake libssl-dev libsqlite3-dev
```

### 2. Сборка проекта
```bash
mkdir build
cd build
cmake ..
make
```

### 4. Настройка базы данных
Схема базы данных находится в файле db/schema.sql. При первом запуске проекта она автоматически инициализируется – **root.db**

***Схема базы данных***

Проект использует три таблицы для хранения данных:
	1.	root_certs: хранение информации о корневых сертификатах.
	2.	issuing_csr: хранение запросов на сертификаты.
	3.	issuing_certs: хранение выданных сертификатов.

### 5. Структура проекта
.
├── CA/                             # Директория с сертификатами и ключами
│   ├── config/                     # Конфигурационные файлы OpenSSL
│   ├── root-ca/                    # Корневой центр сертификации
│   │   ├── certs/                  # Сертификаты корневого CA
│   │   ├── crl/                    # CRL корневого CA
│   │   └── private/                # Закрытые ключи корневого CA
│   ├── issuing-ca/                 # Эмитентский центр сертификации
│       ├── certs/                  # Сертификаты эмитентского CA
│       ├── crl/                    # CRL эмитентского CA
│       ├── csr/                    # Запросы на сертификаты (CSR)
│       └── private/                # Закрытые ключи эмитентского CA
├── db/                             # База данных
│   ├── root.db                     # Файл базы данных
│   └── schema.sql                  # Схема базы данных
├── utils/                          # Вспомогательные классы
│   ├── Menu.hpp                    # Отображение содержимого директорий
│   ├── Keys.hpp                    # Работа с закрытыми ключами
│   ├── Certificates.hpp            # Работа с сертификатами
│   └── CRL.hpp                     # Работа со списками отзыва (CRL)
├── database.h                      # Определение класса для работы с базой данных
├── database.cpp                    # Реализация методов работы с базой данных
├── main.cpp                        # Точка входа в приложение
└── README.md                       # Файл документации